function NewsType(){var e=this;e.modal=$(".modal"),e.news_type=$("#news_type"),e.input=e.modal.find("#add_news_type"),e.add_btn=e.modal.find("#add_news_submit"),e.delete=$("#delete"),e.reminder=$("#info-reminder"),e.add_news_type_url="/cms/news_type/"}NewsType.prototype.run=function(){this.init(),this.newsTypeAction()},NewsType.prototype.init=function(){this.addModal(),this.deleteModal()},NewsType.prototype.addModal=function(){var o=this;o.modal.on("show.bs.modal",function(e){var t=$(e.relatedTarget).attr("data-whatever"),a=$(e.relatedTarget).attr("data-method");$(this).find(".modal-title").html(t),$(this).find("#add_news_submit").attr("data-method",a);var n=$(e.relatedTarget).attr("data-id");if(n){var d=$(e.relatedTarget).attr("data-name");$(this).find("#add_news_submit").attr("data-id",n),o.input.val(d)}else o.input.val(null)})},NewsType.prototype.deleteModal=function(){var e=this;e.delete.on("show.bs.modal",function(e){var t=$(e.relatedTarget).attr("data-id");$(this).find("#confirm").attr("data-id",t)}),e.delete.find("#cancel").on("click",function(){e.delete.modal("hide")})},NewsType.prototype.newsTypeAction=function(){var t=this;t.add_btn.on("click",function(){var e=$(this).attr("data-method");"post"===e?t.addNewsType():"put"===e&&t.changeNewsType()}),t.delete.find("#confirm").on("click",function(){t.deleteNewsType()})},NewsType.prototype.addNewsType=function(){var e=this.input.val();this.ajaxRequest("POST",{name:e})},NewsType.prototype.changeNewsType=function(){var e=this,t={name:e.input.val(),type_id:e.add_btn.attr("data-id")};e.ajaxRequest("PUT",t)},NewsType.prototype.deleteNewsType=function(){var e=this.delete.find("#confirm").attr("data-id");this.ajaxRequest("DELETE",{type_id:e})},NewsType.prototype.ajaxRequest=function(e,t){var n=this;$.ajax({method:e,url:n.add_news_type_url,data:t,beforeSend:function(e){e.setRequestHeader("X-CSRFToken",Tool.getCookie("csrftoken"))},success:function(e,t,a){200===e.code?n.successAction(e,a):n.failAction(e,a)}})},NewsType.prototype.successAction=function(e,t){console.log("hhhh"),this.reminder.css("display","block"),this.reminder.removeClass("alert-warning").addClass("show alert-success").text(e.message),t.done(function(){setTimeout(function(){window.location.reload()},500)})},NewsType.prototype.failAction=function(e,t){var a=this;a.reminder.css("display","block"),a.reminder.addClass("show").html(Tool.getErrorMsg(e.message)),t.done(function(){setTimeout(function(){a.reminder.removeClass("show")},2e3)})},window.newsType=new NewsType,window.newsType.run();